
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Contributing to this repository &#8212; Biomedical literature annotations</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/participants.css" />
    <link rel="stylesheet" type="text/css" href="_static/global.css" />
    <link rel="stylesheet" type="text/css" href="_static/label-set.css" />
    <link rel="stylesheet" type="text/css" href="_static/annotation-set.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Participant demographics" href="participant_demographics.html" />
    <link rel="prev" title="Using this repository" href="using_this_repository.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Biomedical literature annotations</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="overview.html">
                    Biomedical literature annotations
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Introduction
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="using_this_repository.html">
   Using this repository
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Contributing to this repository
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Analyses
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="participant_demographics.html">
   Participant demographics
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Projects
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="projects/autism_mri.html">
   autism_mri
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="projects/cluster_inference.html">
   cluster_inference
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="projects/dynamic_functional_connectivity.html">
   dynamic_functional_connectivity
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="projects/neuro_meta_analyses__phase_1.html">
   neuro_meta_analyses.phase_1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="projects/neuro_meta_analyses__phase_2.html">
   neuro_meta_analyses.phase_2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="projects/neurobridge_fmri.html">
   neurobridge_fmri
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="projects/participant_demographics.html">
   participant_demographics
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>
<a href="https://github.com/neurodatascience/labelbuddy-annotations"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="bottom"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/contributing_to_this_repository.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cloning-the-repository">
   Cloning the repository
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#adding-annotations-to-an-existing-project">
   Adding annotations to an existing project
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-the-labelbuddy-file">
     Creating the
     <code class="docutils literal notranslate">
      <span class="pre">
       .labelbuddy
      </span>
     </code>
     file
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-some-annotations">
     Creating some annotations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exporting-the-annotations">
     Exporting the annotations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#publishing-the-new-annotations">
     Publishing the new annotations
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#adding-a-new-project">
   Adding a new project
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#adding-documents">
     Adding documents
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#reusing-documents-from-another-project">
       Reusing documents from another project
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#downloading-new-documents-with-pubget">
       Downloading new documents with
       <strong>
        pubget
       </strong>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#adding-the-source-dataset-location-information">
       Adding the source dataset location information
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#adding-the-labels">
     Adding the labels
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#publishing-the-new-project">
     Publishing the new project
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#adding-pages-to-this-documentation">
   Adding pages to this documentation
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Contributing to this repository</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cloning-the-repository">
   Cloning the repository
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#adding-annotations-to-an-existing-project">
   Adding annotations to an existing project
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-the-labelbuddy-file">
     Creating the
     <code class="docutils literal notranslate">
      <span class="pre">
       .labelbuddy
      </span>
     </code>
     file
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-some-annotations">
     Creating some annotations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exporting-the-annotations">
     Exporting the annotations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#publishing-the-new-annotations">
     Publishing the new annotations
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#adding-a-new-project">
   Adding a new project
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#adding-documents">
     Adding documents
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#reusing-documents-from-another-project">
       Reusing documents from another project
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#downloading-new-documents-with-pubget">
       Downloading new documents with
       <strong>
        pubget
       </strong>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#adding-the-source-dataset-location-information">
       Adding the source dataset location information
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#adding-the-labels">
     Adding the labels
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#publishing-the-new-project">
     Publishing the new project
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#adding-pages-to-this-documentation">
   Adding pages to this documentation
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="contributing-to-this-repository">
<h1>Contributing to this repository<a class="headerlink" href="#contributing-to-this-repository" title="Permalink to this headline">#</a></h1>
<p>Here we describe how to contribute new annotations to a project in this repository, then how to add a new project.
If you run into any difficulties don’t hesitate to ask for help by <a class="reference external" href="https://github.com/neurodatascience/labelbuddy-annotations/issues">opening an issue</a>.</p>
<section id="cloning-the-repository">
<span id="clone-the-repository"></span><h2>Cloning the repository<a class="headerlink" href="#cloning-the-repository" title="Permalink to this headline">#</a></h2>
<p>The first step is to obtain a local clone of the repository.
<a class="reference external" href="https://github.com/neurodatascience/labelbuddy-annotations/fork">Fork</a> the repository and clone your fork:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/yourgithubusername/labelbuddy-annotations.git
<span class="c1"># or using ssh (recommended):</span>
<span class="c1"># git clone git@github.com:yourgithubusername/labelbuddy-annotations.git</span>

<span class="nb">cd</span><span class="w"> </span>labelbuddy-annotations
<span class="nb">export</span><span class="w"> </span><span class="nv">REPO_ROOT</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">&quot;</span>
</pre></div>
</div>
</section>
<section id="adding-annotations-to-an-existing-project">
<span id="id1"></span><h2>Adding annotations to an existing project<a class="headerlink" href="#adding-annotations-to-an-existing-project" title="Permalink to this headline">#</a></h2>
<p>Here we want to contribute to an existing annotation project, using the <code class="docutils literal notranslate"><span class="pre">autism_mri</span></code> project as an example.
The repository contains the documents we will annotate and the labels we will use.
Locally, we will</p>
<ul class="simple">
<li><p>Create a <code class="docutils literal notranslate"><span class="pre">.labelbuddy</span></code> file (a binary file, used by <a class="reference external" href="https://jeromedockes.github.io/labelbuddy/">labelbuddy</a>, which is ignored by <strong>Git</strong>).</p></li>
<li><p>Import the documents and labels in the <code class="docutils literal notranslate"><span class="pre">.labelbuddy</span></code> file.</p></li>
<li><p>Use <strong>labelbuddy</strong> to create some annotations.</p></li>
<li><p>Export our annotations to a <code class="docutils literal notranslate"><span class="pre">.jsonl</span></code> file that will be added to the repository.</p></li>
</ul>
<p>In the following we suppose your name is “Firstname Lastname”; you should replace that with your actual name.
We recommend using the same name as in your git configuration, ie the output of:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>config<span class="w"> </span>User.Name
</pre></div>
</div>
<p>This way the name of the annotations file you create and your name in the git log will match.</p>
<section id="creating-the-labelbuddy-file">
<span id="create-the-labelbuddy-file"></span><h3>Creating the <code class="docutils literal notranslate"><span class="pre">.labelbuddy</span></code> file<a class="headerlink" href="#creating-the-labelbuddy-file" title="Permalink to this headline">#</a></h3>
<p>We first need to install <a class="reference external" href="https://jeromedockes.github.io/labelbuddy/">labelbuddy</a>, see the <a class="reference external" href="https://jeromedockes.github.io/labelbuddy/labelbuddy/current/installation/">installation instructions</a>.
Next we create our <code class="docutils literal notranslate"><span class="pre">.labelbuddy</span></code> file.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="69f5f8ec-658c-481d-b12d-45b179a28662" name="fe8dfd4c-ea70-4333-962a-b5390ab41f6d" type="radio">
</input><label class="sd-tab-label" for="69f5f8ec-658c-481d-b12d-45b179a28662">
Using the command-line</label><div class="sd-tab-content docutils">
<p>This can be done using a script provided in the repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>scripts/start_project.py<span class="w"> </span>projects/autism_mri
<span class="nb">cd</span><span class="w"> </span>projects/autism_mri
</pre></div>
</div>
<p><strong>Or</strong> we can do the same thing manually, using the <strong>labelbuddy</strong> command-line interface:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>projects/autism_mri
labelbuddy<span class="w"> </span>annotations/Firstname_Lastname.labelbuddy<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--import-labels<span class="w"> </span>labels/Article_Terms.json<span class="w">          </span><span class="se">\</span>
<span class="w">  </span>--import-docs<span class="w"> </span>documents/documents_00001.jsonl
</pre></div>
</div>
</div>
<input id="4c58e0b8-a6ea-489e-9fbb-d0a046b7c552" name="fe8dfd4c-ea70-4333-962a-b5390ab41f6d" type="radio">
</input><label class="sd-tab-label" for="4c58e0b8-a6ea-489e-9fbb-d0a046b7c552">
Using <strong>labelbuddy</strong>’s graphical interface</label><div class="sd-tab-content docutils">
<p>Open labelbuddy from the applications menu, and click <strong>File &gt; Open database</strong>.
In the file dialog, navigate from the root of the repository to <code class="docutils literal notranslate"><span class="pre">projects/autism_mri/annotations/</span></code>, and name the file <code class="docutils literal notranslate"><span class="pre">Firstname_Lastname.labelbuddy</span></code>.</p>
<p>Next, import the labels and documents.
Go to the <strong>Import / Export</strong> tab.
Click <strong>Import labels</strong>, select the <code class="docutils literal notranslate"><span class="pre">Article_Terms.json</span></code> file which is in <code class="docutils literal notranslate"><span class="pre">projects/autism_mri/labels/</span></code>.
Click <strong>Import docs &amp; annotations</strong>, select the <code class="docutils literal notranslate"><span class="pre">docs_00001.jsonl</span></code> file which is in <code class="docutils literal notranslate"><span class="pre">projects/autism_mri/documents/</span></code>.</p>
<p>You can now start creating annotations.</p>
</div>
</div>
</section>
<section id="creating-some-annotations">
<h3>Creating some annotations<a class="headerlink" href="#creating-some-annotations" title="Permalink to this headline">#</a></h3>
<p>If you haven’t opened <strong>labelbuddy</strong> yet you can find it in your applications menu, or invoke it with this command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>labelbuddy<span class="w"> </span>annotations/Firstname_Lastname.labelbuddy
</pre></div>
</div>
<p>In the graphical interface, select the <strong>Annotate</strong> tab and start creating annotations.
See the <a class="reference external" href="https://jeromedockes.github.io/labelbuddy/labelbuddy/current/documentation/">labelbuddy documentation</a> for more information about <strong>labelbuddy</strong>.</p>
</section>
<section id="exporting-the-annotations">
<h3>Exporting the annotations<a class="headerlink" href="#exporting-the-annotations" title="Permalink to this headline">#</a></h3>
<p>Once we have annotated a few documents, we want to push our work back to the upstream repository.
The first step is to export the annotations out of the <code class="docutils literal notranslate"><span class="pre">.labelbuddy</span></code> binary file into a <code class="docutils literal notranslate"><span class="pre">.jsonl</span></code> file.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="bf3f304d-53f8-4397-bc74-0517584e8119" name="2bcb1043-6971-4921-81a7-bdc91fa580ec" type="radio">
</input><label class="sd-tab-label" for="bf3f304d-53f8-4397-bc74-0517584e8119">
Using the command-line</label><div class="sd-tab-content docutils">
<p>This can be done with <code class="docutils literal notranslate"><span class="pre">make</span></code>, using the <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> found at the root of the repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$REPO_ROOT</span><span class="s2">&quot;</span>
make<span class="w"> </span>annotations
</pre></div>
</div>
<p><strong>Or</strong> we can do the same thing manually:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>labelbuddy<span class="w"> </span>annotations/Firstname_Lastname.labelbuddy<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--export-docs<span class="w"> </span>annotations/Firstname_Lastname.jsonl<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--no-text<span class="w">                                          </span><span class="se">\</span>
<span class="w">  </span>--labelled-only<span class="w">                                    </span><span class="se">\</span>
</pre></div>
</div>
</div>
<input id="49eacc80-1e3d-42f8-b905-f141ff3d74ea" name="2bcb1043-6971-4921-81a7-bdc91fa580ec" type="radio">
</input><label class="sd-tab-label" for="49eacc80-1e3d-42f8-b905-f141ff3d74ea">
Using <strong>labelbuddy</strong>’s graphical interface </label><div class="sd-tab-content docutils">
<p>Go to the <strong>Import / Export</strong> tab.
Make sure that the checkboxes are in these states:</p>
<ul class="simple">
<li><p>☑ Export only annotated documents</p></li>
<li><p>☐ Include document text</p></li>
<li><p>☑ Include annotations</p></li>
</ul>
<p>(You only need to check this once, <strong>labelbuddy</strong> will remember your choices next time.)</p>
<p>Click <strong>Export docs &amp; annotations</strong>, and select in <code class="docutils literal notranslate"><span class="pre">projects/autism_mri/annotations/</span></code> a file named <code class="docutils literal notranslate"><span class="pre">Firstname_Lastname.jsonl</span></code>.</p>
</div>
</div>
</section>
<section id="publishing-the-new-annotations">
<h3>Publishing the new annotations<a class="headerlink" href="#publishing-the-new-annotations" title="Permalink to this headline">#</a></h3>
<p>The last step is to get our work included in the upstream repository.
We commit and push the changes, then open a Pull Request.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>add<span class="w"> </span>projects/autism_mri/annotations/Firstname_Lastname.jsonl
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add annotations from Firstname&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="adding-a-new-project">
<h2>Adding a new project<a class="headerlink" href="#adding-a-new-project" title="Permalink to this headline">#</a></h2>
<p>Rather than contributing to an existing project you can also start a new one.
If you haven’t yet, <a class="reference internal" href="#clone-the-repository"><span class="std std-ref">Clone the repository</span></a>, then create a new directory for your project in <code class="docutils literal notranslate"><span class="pre">projects/</span></code>.</p>
<p>Suppose we want to start a project in which we will annotate imaging modalities.
We choose to name the project <code class="docutils literal notranslate"><span class="pre">imaging_modalities</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>projects/
mkdir<span class="w"> </span>imaging_modalities
<span class="nb">cd</span><span class="w"> </span>imaging_modalities
mkdir<span class="w"> </span>documents<span class="w"> </span>labels<span class="w"> </span>annotations
</pre></div>
</div>
<p>Please also add a <code class="docutils literal notranslate"><span class="pre">README.md</span></code> file describing your project.</p>
<section id="adding-documents">
<h3>Adding documents<a class="headerlink" href="#adding-documents" title="Permalink to this headline">#</a></h3>
<section id="reusing-documents-from-another-project">
<h4>Reusing documents from another project<a class="headerlink" href="#reusing-documents-from-another-project" title="Permalink to this headline">#</a></h4>
<p>Whenever it makes sense, different projects should annotate the same documents.
Indeed, this makes it possible to combine the annotations from different projects and obtain rich annotations for the shared documents.
For example, if our <code class="docutils literal notranslate"><span class="pre">imaging_modalities</span></code> project uses the same documents as the <code class="docutils literal notranslate"><span class="pre">participant_demographics</span></code> project, by combining them we obtain documents richly annotated with these two types of information.</p>
<p>To reuse the documents from another project, simply add a symbolic link:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>documents
ln<span class="w"> </span>-s<span class="w"> </span>../../participant_demographics/documents/documents_00001.jsonl
<span class="nb">cd</span><span class="w"> </span>..
</pre></div>
</div>
<p>And if it exists also link the <code class="docutils literal notranslate"><span class="pre">datasets.json</span></code> file, which tells how the full dataset from which documents were obtained can be downloaded:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>documents
ln<span class="w"> </span>-s<span class="w"> </span>../../participant_demographics/documents/datasets.json
<span class="nb">cd</span><span class="w"> </span>..
</pre></div>
</div>
<p>(See a more detailed explanation <a class="reference internal" href="#add-doc-sources-json"><span class="std std-ref">here</span></a>.)</p>
</section>
<section id="downloading-new-documents-with-pubget">
<h4>Downloading new documents with <strong>pubget</strong><a class="headerlink" href="#downloading-new-documents-with-pubget" title="Permalink to this headline">#</a></h4>
<p>If none of the existing document sets suit your project, you can create a new one using <a class="reference external" href="https://neuroquery.github.io/pubget/">pubget</a>.
<strong>pubget</strong> lets you download articles from <a class="reference external" href="https://www.ncbi.nlm.nih.gov/pmc/">PubMedCentral</a> and store them in the format used by this repository.
The articles to download can be selected from a list of PMCIDs, or from a search query for PMC.
To construct a query, you can use the <a class="reference external" href="https://www.ncbi.nlm.nih.gov/pmc/advanced">PMC advanced search</a>.
Then use it for the <strong>pubget</strong> command, for example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pubget<span class="w"> </span>run<span class="w">                                                                 </span><span class="se">\</span>
<span class="w">  </span>./pubget_data<span class="w">                                                            </span><span class="se">\</span>
<span class="w">  </span>-q<span class="w"> </span><span class="s2">&quot;EEG[Abstract] AND MRI[Abstract] AND (2018[PubDate] : 2020[PubDate])&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--labelbuddy<span class="w"> </span>
</pre></div>
</div>
<p>Note the <code class="docutils literal notranslate"><span class="pre">--labelbuddy</span></code> option that tells <strong>pubget</strong> to prepare the documents in <strong>labelbuddy</strong>’s JSONL format.
See the <a class="reference external" href="https://neuroquery.github.io/pubget/">pubget</a> documentation for details.</p>
<p>Note here we are storing the data in the current directory for simplicity, and <code class="docutils literal notranslate"><span class="pre">pubget_data</span></code> is listed in this repository’s <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> so it will not be tracked by <strong>Git</strong>.
However we could store the data anywhere we want; outside of the repository is even better, otherwise we have to make sure we don’t add it to the repository by mistake.</p>
<p>Once the download has finished, we recommend uploading the whole output as a <code class="docutils literal notranslate"><span class="pre">.tar.gz</span></code> file to <a class="reference external" href="https://osf.io/d2qbh/">OSF</a> and adding the link to the annotation project’s <code class="docutils literal notranslate"><span class="pre">README</span></code>.
For example, with the command above <strong>pubget</strong> creates a directory named <code class="docutils literal notranslate"><span class="pre">pubget_data/query_9e14fc5ada411b2f16031d3d1b3c8dd3</span></code>.
We can compress it with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tar<span class="w"> </span>czf<span class="w"> </span>imaging_modalities.tar.gz<span class="w"> </span>-C<span class="w"> </span>pubget_data/<span class="w"> </span>query_9e14fc5ada411b2f16031d3d1b3c8dd3/
</pre></div>
</div>
<p>Then upload the resulting <code class="docutils literal notranslate"><span class="pre">imaging_modalities.tar.gz</span></code> file to OSF.
Remember, <code class="docutils literal notranslate"><span class="pre">imaging_modalities</span></code> is the name of our example project.
We could name the file anything we want as long as it is a <code class="docutils literal notranslate"><span class="pre">.tar.gz</span></code> file.
To tell the repository where to find the full archive, add a <code class="docutils literal notranslate"><span class="pre">documents/datasets.json</span></code> file as explained <a class="reference internal" href="#add-doc-sources-json"><span class="std std-ref">below</span></a>.</p>
<p>Finally, we can get the documents.
The directory created by <strong>pubget</strong> contains a subdirectory called <code class="docutils literal notranslate"><span class="pre">subset_allArticles_labelbuddyData</span></code>, containing <code class="docutils literal notranslate"><span class="pre">.jsonl</span></code> files.
Those are the files we will be adding to the annotations repository, importing into <strong>labelbuddy</strong>, and annotating.
By default <strong>pubget</strong> splits its output into files containing 500 articles each; to begin with copying only the first one is enough.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>pubget_data/query_9e14fc5ada411b2f16031d3d1b3c8dd3/subset_allArticles_labelbuddyData/documents_00001.jsonl<span class="w"> </span>documents/
</pre></div>
</div>
</section>
<section id="adding-the-source-dataset-location-information">
<span id="add-doc-sources-json"></span><h4>Adding the source dataset location information<a class="headerlink" href="#adding-the-source-dataset-location-information" title="Permalink to this headline">#</a></h4>
<p>This repository provides an easy way to <a class="reference internal" href="using_this_repository.html#obtaining-the-full-datasets"><span class="std std-ref">download the full dataset</span></a>.
For this to work, we must tell it where to find it by adding a JSON file in our project’s <code class="docutils literal notranslate"><span class="pre">documents/</span></code> directory.
The file must be in <code class="docutils literal notranslate"><span class="pre">projects/my_project/documents/datasets.json</span></code>.
It contains a list of JSON objects, each having 1 mandatory key (at the moment):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">url</span></code>: the URL from which to download the archive we created, typically an OSF download URL.</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">url</span></code> must point to a GZipped TAR (<code class="docutils literal notranslate"><span class="pre">.tar.gz</span></code>) archive.
The archive must contain one single directory, which is the <strong>pubget</strong> directory – the directory named <code class="docutils literal notranslate"><span class="pre">query_[</span> <span class="pre">...</span> <span class="pre">]</span></code> or <code class="docutils literal notranslate"><span class="pre">pmcidList_[</span> <span class="pre">...</span> <span class="pre">]</span></code>.
Therefore in our case the file would look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://osf.io/download/[ ... ]&quot;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>See the corresponding files in existing projects for more examples.</p>
<p>If we have not downloaded new documents but added a symlink to documents already in another project, we can copy the <code class="docutils literal notranslate"><span class="pre">url</span></code> from that project’s <code class="docutils literal notranslate"><span class="pre">datasets.json</span></code>.</p>
</section>
</section>
<section id="adding-the-labels">
<h3>Adding the labels<a class="headerlink" href="#adding-the-labels" title="Permalink to this headline">#</a></h3>
<p>Next we need to create the labels.
Here also, when it makes sense consider reusing some labels from other projects, possibly using GitHub issues to communicate with other contributors about harmonizing labels.
Indeed, if all projects agree that for example the number of study participant is denoted <code class="docutils literal notranslate"><span class="pre">n_participants</span></code>, that makes it easier to aggregate and reuse annotations than if one project calls it <code class="docutils literal notranslate"><span class="pre">n_participants</span></code> and another uses <code class="docutils literal notranslate"><span class="pre">Participants</span> <span class="pre">count</span></code>.
If we want to reuse exactly the same labels as another project we can create a symbolic link.
To create a new labels file we can either manually edit a JSON file, or create the labels within <strong>labelbuddy</strong>.
The latter is probably more convenient, especially if we decide on the labels as we start reading and annotating the first few documents.</p>
<p>To create the labels in <strong>labelbuddy</strong>, create a <code class="docutils literal notranslate"><span class="pre">.labelbuddy</span></code> as explained <a class="reference internal" href="#create-the-labelbuddy-file"><span class="std std-ref">above</span></a>.
Thus you will end up with a file like <code class="docutils literal notranslate"><span class="pre">annotations/Firstname_Lastname.labelbuddy</span></code> containing the documents.
Open it, and add some labels in the <strong>Labels &amp; Documents</strong> tab.
Then export the labels.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="5900fdc2-20a6-4020-b4c2-71debd42b6c7" name="167accfa-db18-4e21-84b1-1ed351574918" type="radio">
</input><label class="sd-tab-label" for="5900fdc2-20a6-4020-b4c2-71debd42b6c7">
Using the command-line</label><div class="sd-tab-content docutils">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>labelbuddy<span class="w"> </span>annotations/Firstname_Lastname.labelbuddy<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--export-labels<span class="w"> </span>labels/imaging_modality_labels.json
</pre></div>
</div>
</div>
<input id="4fcd41b3-0373-4d1e-a771-2a0b5b0bf017" name="167accfa-db18-4e21-84b1-1ed351574918" type="radio">
</input><label class="sd-tab-label" for="4fcd41b3-0373-4d1e-a771-2a0b5b0bf017">
Using <strong>labelbuddy</strong>’s graphical interface</label><div class="sd-tab-content docutils">
<p>In the <strong>Import / Export</strong> tab, click <strong>Export labels</strong>, and select a file in the <code class="docutils literal notranslate"><span class="pre">annotations</span></code> directory; make sure the extension is <code class="docutils literal notranslate"><span class="pre">.json</span></code>.</p>
</div>
</div>
</section>
<section id="publishing-the-new-project">
<h3>Publishing the new project<a class="headerlink" href="#publishing-the-new-project" title="Permalink to this headline">#</a></h3>
<p>Once all of this is done you can <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code> your changes, open a Pull Request, and the new project will become visible in the upstream repository.
You can start creating annotations as explained <a class="reference internal" href="#adding-annotations-to-an-existing-project"><span class="std std-ref">above</span></a>.</p>
</section>
</section>
<section id="adding-pages-to-this-documentation">
<h2>Adding pages to this documentation<a class="headerlink" href="#adding-pages-to-this-documentation" title="Permalink to this headline">#</a></h2>
<p>Another way to contribute is to add pages to this documentation, to share analyses, describe a project in depth etc.</p>
<p>The contents are in <code class="docutils literal notranslate"><span class="pre">analysis/book</span></code> below the root of the repository.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>analysis/book
pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</pre></div>
</div>
<p>The html version is built with <a class="reference external" href="https://jupyterbook.org/en/stable/start/overview.html">jupyter-book</a>, see its documentation for details.</p>
<p>To add a new page you will need to create a <code class="docutils literal notranslate"><span class="pre">.py</span></code> or <code class="docutils literal notranslate"><span class="pre">.md</span></code> file in the book’s directory, and add it to the list of chapters in <code class="docutils literal notranslate"><span class="pre">analysis/book/_toc.yml</span></code>.
To build the book locally, run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">book-full</span></code> from the root of the repository.
(Once the database and CSV file have already been built, you can just use <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">book</span></code> which is faster.)
You can then see it by pointing your browser to <code class="docutils literal notranslate"><span class="pre">analysis/book/_build/html/index.html</span></code>.</p>
<p><strong>Note:</strong> the pages in the <strong>Projects</strong> section (in the <code class="docutils literal notranslate"><span class="pre">analysis/book/projects</span></code>) are generated automatically – don’t edit them directly!
Instead, edit the project’s <code class="docutils literal notranslate"><span class="pre">README.md</span></code>, which gets included in the project page, or one of the templates in <code class="docutils literal notranslate"><span class="pre">analysis/book_helpers/templates/</span></code>.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="using_this_repository.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Using this repository</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="participant_demographics.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Participant demographics</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By https://github.com/neurodatascience/labelbuddy-annotations/graphs/contributors<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>